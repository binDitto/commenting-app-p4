

<div class="container">
  <div class="row">

    <a href="#" class="btn btn-success btn-lg above-toggle">Add Post  <i class="fa fa-plus"></i></a>



    <hr>

      <% @posts.each do |post| %>
        <div class="col-xs-12 col-sm-6">

          <div class="panel panel-default">
            <div class="panel-body">
              <div class="media">

                <!-- this is the form style for the upvote downvote buttons a -->
                <div class="media-left">
                  <div class="btn-group-vertical btn-group-sm">
                        <!--  This form_for is passing in two things
                         current post, and adding votes to this post
                         post is identifying the post you want to add votes to
                         post.votes.build is adding the votes to that post
                         before I had Vote.new which is adding a new vote in general
                         but since the first argument is for post, it understands the relation anyways. -->
                        <%= form_for([post,  post.votes.build ]) do |p| %>
                          <%= p.hidden_field :user_id, value: current_user.id if current_user %>
                          <%= p.hidden_field :vote, value: 1 %>
                          <%= button_tag(class: "btn btn-default btn-sm btn-top") do %>
                            <i class="fa fa-chevron-up fa-lg"></i>
                          <% end %>
                        <% end %>
                        <!-- end upvote form -->

                    <button type="button" name="button" class="btn btn-default">
                      <%= post.score %>
                    </button>

                      <!-- form for downvote -->
                      <%= form_for([post,  post.votes.build]) do |p| %>
                        <%= p.hidden_field :user_id, value: current_user.id if current_user %>
                        <!-- This hidden_field adds a -1 vote -->
                        <%= p.hidden_field :vote, value: -1 %>
                        <%= button_tag(class: "btn btn-default btn-sm btn-bot") do %>
                          <i class="fa fa-chevron-down fa-lg"></i>
                        <% end %>
                      <% end %>
                      <!-- end downvote form -->
                  </div>
                </div>
                <!-- end the voting buttons -->
                <!-- main media body -->
                <div class="media-body">
                  <!-- image thumbnail for post -->
                  <img src="<%= post.img_url %>" width="70px" height="70px" alt="" class="media-object pull-right">
                  <!-- link to show page for post -->
                  <%= link_to(post_path(post)) do %>
                  <h2 class="media-heading">
                    <%= post.title %>
                  </h2>
                  <% end %>
                  <!-- end show page link -->

                  <!-- header body text & truncated -->
                  <%= truncate(post.body, length: 100, omission: '... (click to see more)') %>
                  <br/>
                  <!-- time made info -->
                  <small>Posted <%= time_ago_in_words(post.created_at) %> ago.</small>
                  <hr>
                  <!-- view link button to open link associated with post -->
                  <div class="pull-left">
                    <%= link_to "View Link", post.link, class: "btn btn-default btn-xs" %>
                  </div>

                  <!-- edit buttons -->
                  <div class="pull-right">

                    <% if logged_in? && post.user_id == current_user.id %>
                    <i class="fa fa-ellipsis-v fa-lg"></i>
                      <div class="btn-group toggle">
                        <%= link_to(edit_post_path(post), class: "btn btn-primary btn-xs") do %>
                          Edit <i class="fa fa-pencil"></i>
                        <% end %>
                        <%= link_to(post_path(post), method: :delete,
                        data: { confirm: "Are you sure?"}, class: "btn btn-danger btn-xs" ) do %>
                          Delete <i class="fa fa-trash-o"></i>
                        <% end %>
                      </div>

                    <% end %>

                  </div>
                </div>
                <!-- end media body -->
              </div>

            </div>
          </div>
        </div>

      <% end %>



  </div>
</div>
